{% if not page.meta.no_comments %}
<!-- Insert generated snippet here -->
<script
  src="https://giscus.app/client.js"
  data-repo="YatSenOS/YatSenOS-Tutorial-Volume-2"
  data-repo-id="R_kgDOKtthnQ"
  data-category="Comments"
  data-category-id="DIC_kwDOKtthnc4CbdnE"
  data-mapping="pathname"
  data-strict="1"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="preferred_color_scheme"
  data-lang="zh-CN"
  data-loading="lazy"
  crossorigin="anonymous"
  async
></script>
<!-- Synchronize Giscus theme with palette -->
<script>
  var giscus = document.querySelector('script[src*=giscus]')

  // Set palette on initial load
  var palette = __md_get('__palette')
  if (palette && typeof palette.color === 'object') {
    var theme = palette.color.scheme === 'slate' ? 'transparent_dark' : 'light'

    // Instruct Giscus to set theme
    giscus.setAttribute('data-theme', theme)
  }

  // Register event handlers after documented loaded
  document.addEventListener('DOMContentLoaded', function () {
    var ref = document.querySelector('[data-md-component=palette]')
    ref.addEventListener('change', function () {
      var palette = __md_get('__palette')
      if (palette && typeof palette.color === 'object') {
        var theme =
          palette.color.scheme === 'slate' ? 'transparent_dark' : 'light'

        // Instruct Giscus to change theme
        var frame = document.querySelector('.giscus-frame')
        frame.contentWindow.postMessage(
          { giscus: { setConfig: { theme } } },
          'https://giscus.app'
        )
      }
    })
  })
</script>
{% endif %}
